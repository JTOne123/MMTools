//////////////////////////////////////////////////////////////////////
// VARIABLES
//////////////////////////////////////////////////////////////////////

var target = Argument("target", "Default");
var baseDir = MakeAbsolute(Directory("../")).ToString();

//////////////////////////////////////////////////////////////////////
// DEFAULT TASK
//////////////////////////////////////////////////////////////////////

Task("Collect")
    .Description("Builds the Application")
    .Does(() =>
{
    EnsureDirectoryExists(srcDir);
    CleanDirectory(srcDir);
});

Task("Package")
    .Description("Creates Native Nuget Packages from Executables")
    .IsDependentOn("Collect")
    .Does(() =>
{
    EnsureDirectoryExists(publishDir);
    Information("Packing to " + publishPath);
});

//////////////////////////////////////////////////////////////////////
// TASK TARGETS
//////////////////////////////////////////////////////////////////////

Task("Default")
    .IsDependentOn("Package");

//////////////////////////////////////////////////////////////////////
// EXECUTION
//////////////////////////////////////////////////////////////////////

RunTarget(target);
